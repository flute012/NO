<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>頁面查看與比較</title>
    <style>
        .comparison-content { margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>頁面查看與比較</h1>
    
    <div>
        <h2>選擇要查看或比較的頁面：</h2>
        <input type="checkbox" id="page1" value="1.html">
        <label for="page1">1.html</label>
        <input type="checkbox" id="page2" value="2.html">
        <label for="page2">2.html</label>
        <input type="checkbox" id="page3" value="3.html">
        <label for="page3">3.html</label>
        <input type="checkbox" id="page4" value="4.html">
        <label for="page4">4.html</label>
    </div>
    
    <div>
        <h2>選擇要查看的元素：</h2>
        <input type="radio" id="compareA1" name="compareElement" value="a1" checked>
        <label for="compareA1">查看 &lt;div id="a1"&gt;</label>
        <input type="radio" id="compareA2" name="compareElement" value="a2">
        <label for="compareA2">查看 &lt;div id="a2"&gt;</label>
    </div>
    
    <button onclick="viewOrComparePages()">查看/比較</button>
    
    <div id="resultArea"></div>

    <script>
    async function viewOrComparePages() {
        const selectedPages = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value);
        const compareElement = document.querySelector('input[name="compareElement"]:checked').value;
        const resultArea = document.getElementById('resultArea');
        resultArea.innerHTML = '';

        if (selectedPages.length === 0) {
            alert('請至少選擇一個頁面');
            return;
        }

        for (const page of selectedPages) {
            try {
                const response = await fetch(page);
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const content = doc.getElementById(compareElement)?.innerHTML || '未找到指定元素';
                
                const contentDiv = document.createElement('div');
                contentDiv.className = 'comparison-content';
                contentDiv.innerHTML = `<h3>${page} 中的 #${compareElement} 內容：</h3><div>${content}</div>`;
                resultArea.appendChild(contentDiv);
            } catch (error) {
                console.error(`無法載入 ${page}:`, error);
                const errorDiv = document.createElement('div');
                errorDiv.className = 'comparison-content';
                errorDiv.innerHTML = `<h3>錯誤：無法載入 ${page}</h3>`;
                resultArea.appendChild(errorDiv);
            }
        }
    }
    </script>
</body>
</html>