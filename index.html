<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>網頁比較工具</title>
    <style>
        .comparison-container {
            display: flex;
            flex-wrap: wrap;
        }
        .page-content {
            border: 1px solid #ccc;
            margin: 10px;
            padding: 10px;
            width: calc(50% - 22px);
        }
    </style>
</head>
<body>
    <h1>網頁比較工具</h1>
    <div>
        <label>選擇要比較的頁面：</label>
        <select id="pageSelector" multiple>
            <option value="1.html">1.html</option>
            <option value="2.html">2.html</option>
            <option value="3.html">3.html</option>
            <option value="4.html">4.html</option>
        </select>
        <button onclick="comparePage()">比較</button>
    </div>
    <div>
        <label>選擇要比較的元素：</label>
        <select id="elementSelector">
            <option value="a1">a1</option>
            <option value="a2">a2</option>
        </select>
    </div>
    <div id="comparisonResult" class="comparison-container"></div>

    <script>
        async function fetchPage(url) {
            try {
                const response = await fetch(url);
                const text = await response.text();
                const parser = new DOMParser();
                return parser.parseFromString(text, 'text/html');
            } catch (error) {
                console.error('Error fetching page:', error);
                return null;
            }
        }

        async function comparePage() {
            const pageSelector = document.getElementById('pageSelector');
            const elementSelector = document.getElementById('elementSelector');
            const comparisonResult = document.getElementById('comparisonResult');
            const selectedPages = Array.from(pageSelector.selectedOptions).map(option => option.value);
            const selectedElement = elementSelector.value;

            comparisonResult.innerHTML = '';

            for (const page of selectedPages) {
                const doc = await fetchPage(page);
                if (doc) {
                    const element = doc.getElementById(selectedElement);
                    if (element) {
                        const pageContent = document.createElement('div');
                        pageContent.className = 'page-content';
                        pageContent.innerHTML = `<h2>${page}</h2>${element.innerHTML}`;
                        comparisonResult.appendChild(pageContent);
                    } else {
                        console.error(`Element with id "${selectedElement}" not found in ${page}`);
                    }
                }
            }
        }
    </script>
</body>
</html>